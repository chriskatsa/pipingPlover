{"ts":1346356533034,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var setUpTabs = function(){\n    dojo.forEach(configOptions.tabTitles,function(tab,i){\n        $(\"#tabArea\").append(\"<div id='tab\"+i+\"' class='tab'><p id='tabText\"+i+\"' class='tabText'>\"+configOptions.tabTitles[i].title+\"</p></div>\");\n    });\n    $(\".tab\").eq(section).addClass(\"selected\");\n    $(\".tab\").click(function(){\n        setSection($(this).index());\n        $(\".tab\").removeClass(\"selected\");\n        $(this).addClass(\"selected\");\n    });\n};\n\nvar setSection = function(sec){\n\n    $(\"#sectionTitle\").html(sectionData[sec].title);\n    $(\"#sectionText\").html(sectionData[sec].text);\n\n    $(\".selectionBullet\").remove();\n    $(\".gallerySlide\").remove();\n    dojo.forEach(sectionData[sec].images,function(img){\n        $(\"#fader\").append(\"<li class='gallerySlide'><img src='\"+img.src+\"' caption='\"+img.copyright+\"' class='galleryImg' alt=''></li>\");\n        $(\"#imgSelector\").append(\"<span class='selectionBullet'>&bull;</span>\");\n    });\n    $(\"#imgSelector\").css(\"left\",($(\"#leftPane\").width() - $(\"#imgSelector\").width())/2);\n    $(\".selectionBullet\").eq(0).addClass(\"selectionBulletSelected\");\n\n    $(\".selectionBullet\").click(function(){\n        $(\"#fader\").imageFader(\"goTo\",$(this).index());\n    });\n\n    if(firstLoad === false){\n        firstLoad = true;\n        $(\"#fader\").imageFader({\n            captions : true,\n            captionAttr : \"caption\",\n            animationEnd : function(obj){\n                $(\".selectionBullet\").removeClass(\"selectionBulletSelected\");\n                $(\".selectionBullet\").eq(obj.index).addClass(\"selectionBulletSelected\");\n            }\n        });\n    }\n    else{\n        $(\"#fader\").imageFader(\"update\");\n    }\n\n};"]],"start1":0,"start2":0,"length1":0,"length2":1668}]],"length":1668}
{"contributors":[],"silentsave":true,"ts":1347884826231,"patch":[[{"diffs":[[-1,"var setUpTabs = function(){\n    dojo.forEach(configOptions.tabTitles,function(tab,i){\n        $(\"#tabArea\").append(\"<div id='tab\"+i+\"' class='tab'><p id='tabText\"+i+\"' class='tabText'>\"+configOptions.tabTitles[i].title+\"</p"],[1,"$(window).resize(function(){\n    resetLayout();\n});\n\nvar resetLayout = function(){\n    var lastWidth = 0;\n    $(\".tab\").each(function(){\n        if($(this).index() !== $(\".tab\").length - 1){\n            $(this).css(\"width\",$(\"#mapPane\").width()/5);\n            lastWidth = lastWidth+$(this).width();\n        }\n        else{\n            $(this).css(\"width\",$(\"#mapPane\").width() - lastWidth - 1);\n        }\n    });\n\n    $(\"#contentSlider\").css(\"width\",$(\"#contentSlider\").children(\".contentSlide\").length * 450);\n\n    $(\".nextArrow\").first().css(\"border-top\",\"20px solid transparent\").css(\"border-bottom\",\"20px solid transparent\").css(\"border-left\",\"20px solid #fff\").css(\"margin-bottom\",5).css(\"margin-left\",($(\".nextArrowCon\").first().width() - 20)/2);\n\n    $(\".singlePhoto\").each(function(){\n        $(this).css(\"margin-left\",($(this).parent(\".fader\").width() - $(this).width())/2).css(\"margin-top\",($(this).parent(\".fader\").height() - $(this).height())/2);\n    });\n};\n\nvar addStart = function(i){\n    if (i === 0){\n        return \"START\";\n    }\n    else{\n        return \"\";\n    }\n};\n\nvar setUpTabs = function(){\n    dojo.forEach(configOptions.tabTitles,function(tab,i){\n        $(\"#tabArea\").append(\"<div id='tab\"+i+\"' class='tab'><p id='tabText\"+i+\"' class='tabText'>\"+tab.title+\"</p></div>\");\n        //Content Slider\n        $(\"#contentSlider\").append(\"<div class='contentSlide tabSlide \"+tab.season+\"Slide \"+tab.season+\"' season='\"+i+\"'><div class='tabPhoto photoCredit \"+tab.season+\"' style='color:#fff;'>\"+sectionData[i].images[0].copyright+\"</div><div class='tabPhoto fader \"+tab.season+\"'><img class='tabPhoto singlePhoto' src='\"+sectionData[i].images[0].src+\"' alt=''></div><div class='tabPhoto photoCaption \"+tab.season+\"'></div><table class='titleBar \"+tab.season+\"'><tbody><tr><td class='prevArrowCon \"+tab.season+\" arrowCon tabArrow' style='width:10px; padding:10px;'><div class='prevArrow'></div></td><td class='tabTitle \"+tab.season+\"title'>\"+sectionData[i].title+\"</td><td class='nextArrowCon \"+tab.season+\" arrowCon tabArrow' style='width:10px; padding:10px;'><div class='nextArrow'></div>\"+addStart(i)+\"</td></tr></tbody></table><div class='textContent \"+tab.season+\"'>\"+sectionData[i].text+\"</div"],[0,"></d"]],"start1":0,"start2":0,"length1":227,"length2":2222},{"diffs":[[0,"\");\n    });\n"],[1,"\n"],[0,"    $(\".tab\""]],"start1":2225,"start2":2225,"length1":24,"length2":25},{"diffs":[[0,"cted\");\n    });\n"],[1,"    resetLayout();\n"],[0,"};\n\nvar setSecti"]],"start1":2428,"start2":2428,"length1":32,"length2":51},{"diffs":[[0,"    "],[-1,"$(\"#sectionTitle\").html(sectionData[sec].title"],[1,"popup.hide();\n    section = sec;\n\n    $(\".contentSlide\").removeClass(\"currentSlide\");\n    $(\".tabSlide\").eq(sec).addClass(\"currentSlide\");\n    $(\"#contentSlider\").animate({\n        \"left\" : -$(\".currentSlide\").position().left\n    },\"fast\""],[0,");\n"],[1,"\n"],[0,"    "],[-1,"$(\"#sectionText\").html(sectionData[sec].text);\n\n    $(\".selectionBullet\").remove();\n    $(\".gallerySlide\").remove();\n    dojo.forEach(sectionData[sec].image"],[1,"setLayers(sec);\n\n};\n\nvar getPhotoTags = function (attr) {\n    if (attr.Photo_2_URL !== null && attr.Photo_3_URL !== null){\n        return \"<img src='images/photos/\"+attr.Photo_1_URL+\".jpg' credit='\"+attr.Photo_1_credit+\"' caption='\"+attr.Photo_1_caption+\"' alt=''><img src='images/photos/\"+attr.Photo_2_URL+\".jpg' credit='\"+attr.Photo_2_credit+\"' caption='\"+attr.Photo_2_caption+\"' alt=''><img src='images/photos/\"+attr.Photo_3_URL+\".jpg' credit='\"+attr.Photo_3_credit+\"' caption='\"+attr.Photo_3_caption+\"' alt=''>\";\n    }\n    else if (attr.Photo_2_URL !== null){\n        return \"<img src='images/photos/\"+attr.Photo_1_URL+\".jpg' credit='\"+attr.Photo_1_credit+\"' caption='\"+attr.Photo_1_caption+\"' alt=''><img src='images/photos/\"+attr.Photo_2_URL+\".jpg' credit='\"+attr.Photo_2_credit+\"' caption='\"+attr.Photo_2_caption+\"' alt=''>\";\n    }\n    else{\n        return \"<img src='images/photos/\"+attr.Photo_1_URL+\".jpg' credit='\"+attr.Photo_1_credit+\"' caption='\"+attr.Photo_1_caption+\"' alt=''>\";\n    }\n};\n\nvar setLayers = function(sec){\n\n    popup.hide();\n    section = sec;\n\n    if($(\".contentSlide\").length === sectionData.length){\n        dojo.forEach(map.getLayer(findLayerName(\"csv\")).graphic"],[0,"s,fu"]],"start1":2500,"start2":2500,"length1":217,"length2":1448},{"diffs":[[0,"unction("],[-1,"img"],[1,"grp"],[0,"){\n     "]],"start1":3947,"start2":3947,"length1":19,"length2":19},{"diffs":[[0,"    "],[1,"  "],[1,"  "],[0,"$(\""],[-1,"#fader\").append(\"<li class='gallerySlide'><img src='\"+img.src+\"' caption='\"+img.copyright+\"' class='galleryImg' alt=''></li>\");\n        $(\"#imgSelector\").append(\"<span class='selectionBullet'>&bull;</span"],[1,".contentSlide.\"+grp.attributes.Season.toLowerCase()).last().after(\"<div class='contentSlide popupSlide \"+grp.attributes.Season.toLowerCase()+\"Slide \"+grp.attributes.Season.toLowerCase()+\"' season='\"+grp.attributes.Season_Number+\"'><div class='photoCredit \"+grp.attributes.Season.toLowerCase()+\"' style='color:#fff;'>© \"+grp.attributes.Photo_1_credit+\"</div><div class='popup fader \"+grp.attributes.Season.toLowerCase()+\"'>\"+getPhotoTags(grp.attributes)+\"</div><div class='photoCaption \"+grp.attributes.Season.toLowerCase()+\"' style='color:#fff;'>\"+grp.attributes.Photo_1_caption+\"</div><table class='titleBar \"+grp.attributes.Season.toLowerCase()+\"'><tbody><tr><td class='prevArrowCon \"+grp.attributes.Season.toLowerCase()+\" arrowCon popupArrow' style='width:10px; padding:10px;'><div class='prevArrow'></div></td><td class='popupTitle \"+grp.attributes.Season.toLowerCase()+\"title'>\"+grp.attributes.Point_name+\"</td><td class='nextArrowCon \"+grp.attributes.Season.toLowerCase()+\" arrowCon popupArrow' style='width:10px; padding:10px;'><div class='nextArrow'></div></td></tr></tbody></table><div class='textContent \"+grp.attributes.Season.toLowerCase()+\"'>\"+grp.attributes.Description+\"</div></div"],[0,">\");"]],"start1":3965,"start2":3965,"length1":215,"length2":1211},{"diffs":[[0,"    "],[1," "],[1,"   "],[0,"});\n"],[1,"\n    "],[0,"    $(\""],[-1,"#imgSelector\").css(\"left\",($(\"#leftPane\").width() - $(\"#imgSelector\").width())/2"],[1,".contentSlide\").last().children(\".titleBar\").children(\"tbody\").children(\"tr\").children(\".nextArrowCon\").hide();\n\n        $(\".popup.fader\").imageFader({\n            autoPlay : false,\n            animationEnd : function(data){\n                var img = data.currentImg.jqueryElement;\n                img.parent(\"div\").parent(\"div\").children(\".photoCredit\").html(\"© \"+img.attr(\"credit\"));\n                img.parent(\"div\").parent(\"div\").children(\".photoCaption\").html(img.attr(\"caption\"));\n\n                resetLayout();\n            }\n        }"],[0,");\n"],[1,"\n "],[0,"    "],[1,"   "],[0,"$(\"."],[-1,"selectionBullet\").eq(0).addClass(\"selectionBulletSelected\");\n\n    $(\".selectionBullet\").click(function(){\n        $(\"#fader\").imageFader(\"goTo\",$(this).index()"],[1,"nextArrowCon\").click(function(){\n            var current = undefined;\n            $(\".contentSlide\").each(function(i){\n                if($(this).hasClass(\"currentSlide\")){\n                    $(this).removeClass(\"currentSlide\");\n                    current = $(this).next();\n                    if($(this).attr(\"season\") !== current.attr(\"season\")){\n                        setLayers(parseFloat(current.attr(\"season\")));\n                    }\n                }\n            });\n            current.addClass(\"currentSlide\");\n            $(\"#contentSlider\").animate({\n                \"left\" : -$(\".currentSlide\").position().left\n            },\"fast\");\n        });\n\n        $(\".prevArrowCon\").click(function(){\n            var current = undefined;\n            $(\".contentSlide\").each(function(i){\n                if($(this).hasClass(\"currentSlide\")){\n                    $(this).removeClass(\"currentSlide\");\n                    current = $(this).prev();\n                    if($(this).attr(\"season\") !== current.attr(\"season\")){\n                        setLayers(parseFloat(current.attr(\"season\")));\n                    }\n                }\n            });\n            current.addClass(\"currentSlide\");\n            $(\"#contentSlider\").animate({\n                \"left\" : -$(\".currentSlide\").position().left\n            },\"fast\""],[0,");\n    "],[1,"  "],[1,"  "],[0,"});\n"],[-1,"\n    if(firstLoad === false){\n        firstLoad = true;\n        $(\"#fader\").imageFader({\n            captions : true,\n            captionAttr : \"caption\",\n            animationEnd : function(obj){\n                $(\".selectionBullet\").removeClass(\"selectionBulletSelected\""],[1,"        \n        se\n    }\n\n    resetLayout();\n\n    map.getLayer(findLayerName(\"csv\")).show();\n    map.getLayer(findLayerName(\"SpringMigration\")).hide();\n    map.getLayer(findLayerName(\"FallMigration\")).hide();\n    if(sec === 1){\n        map.getLayer(findLayerName(\"summer\")).show();\n        map.getLayer(findLayerName(\"winter\")).hide();\n        dojo.forEach(map.getLayer(findLayerName(\"csv\")).graphics,function(grp){\n            if(grp.attributes.Season_Number === sec){\n                grp.show();\n            }\n            else{\n                grp.hide();\n            }\n        });\n\n        map.setExtent(new esri.geometry.Extent({\"xmin\":-10079006.019723145,\"ymin\":3137303.833390451,\"xmax\":-6018671.077215662,\"ymax\":7114475.289123686,\n  \"spatialReference\":{\"wkid\":102100}}));\n    }\n    else if(sec === 2){\n        map.getLayer(findLayerName(\"FallMigration\")).show();\n        map.getLayer(findLayerName(\"summer\")).hide();\n        map.getLayer(findLayerName(\"winter\")).hide();\n        dojo.forEach(map.getLayer(findLayerName(\"csv\")).graphics,function(grp){\n            if(grp.attributes.Season_Number === sec){\n                grp.show();\n            }\n            else{\n                grp.hide();\n            }\n        });\n\n        map.setExtent(new esri.geometry.Extent({\"xmin\":-10504607.393214896,\"ymin\":2265310.214713391,\"xmax\":-6444272.450707414,\"ymax\":6242481.670446625,\n  \"spatialReference\":{\"wkid\":102100}}));\n    }\n    else if(sec === 3){\n        map.getLayer(findLayerName(\"summer\")).hide();\n        map.getLayer(findLayerName(\"winter\")).show();\n        dojo.forEach(map.getLayer(findLayerName(\"csv\")).graphics,function(grp){\n            if(grp.attributes.Season_Number === sec){\n                grp.show();\n            }\n            else{\n                grp.hide("],[0,");\n "]],"start1":5177,"start2":5177,"length1":552,"length2":3700},{"diffs":[[0,"    "],[1,"}\n"],[0,"    "],[-1,"$(\".selectionBullet\").eq(obj.index).addClass(\"selectionBulletSelected\");\n            }\n        });\n    }\n    else{\n        $(\"#fader\").imageFader(\"upda"],[1,"    });\n\n        map.setExtent(new esri.geometry.Extent({\"xmin\":-11297106.502475392,\"ymin\":1180515.909290458,\"xmax\":-7236771.559967909,\"ymax\":5157687.365023692,\n  \"spatialReference\":{\"wkid\":102100}}));\n    }\n    else if(sec === 4){\n        map.getLayer(findLayerName(\"SpringMigration\")).show();\n        map.getLayer(findLayerName(\"summer\")).hide();\n        map.getLayer(findLayerName(\"winter\")).hide();\n        dojo.forEach(map.getLayer(findLayerName(\"csv\")).graphics,function(grp){\n            if(grp.attributes.Season_Number === sec){\n                grp.show();\n            }\n            else{\n                grp.hide();\n            }\n        });\n\n        map.setExtent(new esri.geometry.Extent({\"xmin\":-10504607.393214896,\"ymin\":2265310.214713391,\"xmax\":-6444272.450707414,\"ymax\":6242481.670446625,\n  \"spatialReference\":{\"wkid\":102100}}));\n    }\n    else{\n        map.getLayer(findLayerName(\"csv\")).hide();\n        map.getLayer(findLayerName(\"summer\")).show();\n        map.getLayer(findLayerName(\"win"],[0,"te"],[1,"r"],[0,"\")"],[-1,";\n    }\n"],[1,").show();\n\n        map.setExtent(new esri.geometry.Extent({\"xmin\":-13762659.286841381,\"ymin\":652183.1697834609,\"xmax\":-5641989.401826414,\"ymax\":8606526.081249928,\n  \"spatialReference\":{\"wkid\":102100}}));\n    }\n};\n\nvar positionInfo = function(pt){\n    var scrPt = map.toScreen(pt);\n    console.log(scrPt);\n    $(\"#hoverInfo\").css({\n        top: (scrPt.y - ($(\"#hoverInfo\").height()/2) - 5),\n        left:scrPt.x + 15\n    });\n    $(\"#hoverInfoArrow\").css({\n        top: (scrPt.y - 7),\n        left:scrPt.x + 7\n    });\n    $(\"#hoverInfo\").show();\n    $(\"#hoverInfoArrow\").show();"],[0,"\n};"]],"start1":8884,"start2":8884,"length1":174,"length2":1599}]],"length":10483,"saved":false}
{"ts":1347884826315,"patch":[[{"diffs":[[0,"      se"],[1,"t"],[0,"\n    }\n\n"]],"start1":7107,"start2":7107,"length1":16,"length2":17}]],"length":10484,"saved":false}
{"ts":1347884827302,"patch":[[{"diffs":[[0,"     set"],[1,"La"],[0,"\n    }\n\n"]],"start1":7108,"start2":7108,"length1":16,"length2":18}]],"length":10486,"saved":false}
{"ts":1347884828171,"patch":[[{"diffs":[[0,"   setLa"],[1,"yers(s)"],[0,"\n    }\n\n"]],"start1":7110,"start2":7110,"length1":16,"length2":23}]],"length":10493,"saved":false}
{"ts":1347884828932,"patch":[[{"diffs":[[0,"Layers(s"],[1,"ec"],[0,")\n    }\n"]],"start1":7116,"start2":7116,"length1":16,"length2":18}]],"length":10495,"saved":false}
{"ts":1347884831484,"patch":[[{"diffs":[[0,"ers(sec)"],[1,";"],[0,"\n    }\n\n"]],"start1":7119,"start2":7119,"length1":16,"length2":17}]],"length":10496,"saved":false}
{"ts":1347884851374,"patch":[[{"diffs":[[0,"});\n"],[-1,"        \n        setLayers(sec);\n"],[0,"    "]],"start1":7092,"start2":7092,"length1":41,"length2":8}]],"length":10463,"saved":false}
